# é¡¹ç›®ä¿¡æ¯

## ğŸ“¦ æ–‡ä»¶å¤¹è¯´æ˜

è¿™æ˜¯MNISTæ•°å­—æ¯”è¾ƒé¡¹ç›®çš„**æ¼”ç¤º/å¤ç°æ–‡ä»¶å¤¹**ï¼ŒåŒ…å«äº†ä»åŸºçº¿57%åˆ°æœ€ç»ˆ93%çš„å®Œæ•´æ¨¡å‹è¿›åŒ–å†ç¨‹ã€‚

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **ç»Ÿä¸€ç»“æ„**: æ‰€æœ‰æ¨¡å‹æŒ‰è¿›åŒ–é˜¶æ®µç»„ç»‡
2. **æ˜“äºæµ‹è¯•**: æä¾›ä¸€é”®æµ‹è¯•è„šæœ¬
3. **å®Œæ•´æ–‡æ¡£**: ä»å¿«é€Ÿå¼€å§‹åˆ°æŠ€æœ¯ç»†èŠ‚
4. **å¯å¤ç°**: æ‰€æœ‰æ¨¡å‹æƒé‡å’Œé…ç½®éƒ½å·²åŒ…å«

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æ•°æ®é›† (data/)

| æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|
| train.npz | ~5.5MB | è®­ç»ƒé›† (10000æ ·æœ¬) |
| val.npz | ~1.1MB | éªŒè¯é›† (2000æ ·æœ¬) |
| test_public.npz | ~1.1MB | æµ‹è¯•é›† (2000æ ·æœ¬) |

**æ•°æ®æ ¼å¼**: 
- å›¾åƒ: 28Ã—56 (ä¸¤ä¸ª28Ã—28æ‹¼æ¥)
- æ ‡ç­¾: 0(ä¸åŒ) / 1(ç›¸åŒ)

---

### æ¨¡å‹æƒé‡ (models/)

**Stage 1: ç‰¹å¾èåˆé©å‘½**
- `stage1_improvedv2/`: ImprovedV2æ¨¡å‹ (85.28%)

**Stage 2: æ·±åº¦ä¼˜åŒ–çªç ´**
- `stage2_resnet_optimized/resnet_optimized_1.12/`: æœ€ä½³å•æ¨¡å‹ (88.75%) â­
- `stage2_resnet_optimized/resnet_fusion/`: Fusionç‰ˆæœ¬ (87.92%)
- `stage2_resnet_optimized/resnet_optimized/`: æ ‡å‡†ç‰ˆæœ¬ (87.80%)

**Stage 3: å¤šæ ·æ€§æ¢ç´¢**
- `stage3_multi_seed/seed_*/`: å¤šç§å­è®­ç»ƒæ¨¡å‹ (86-87%)
- `stage3_multi_seed/fpn_model/`: FPNæ¶æ„ (87.30%)
- `stage3_multi_seed/resnet_fusion_seed*/`: Fusionå¤šç§å­ (84-85%)

**Stage 4: Stackingé›†æˆ**
- `stage4_stacking/`: Stackingç»“æœå’Œå…ƒå­¦ä¹ å™¨ (93.09%)

---

### æºä»£ç  (src/)

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| `data_loader.py` | æ•°æ®åŠ è½½ã€é¢„å¤„ç†ã€å¢å¼º |
| `model_loader.py` | æ¨¡å‹åŠ è½½ã€æƒé‡ç®¡ç† |
| `stacking_ensemble.py` | Stackingé›†æˆå®ç° |
| `models/simple_compare_cnn.py` | ResNetæ¶æ„å®šä¹‰ |
| `models/fpn_architecture_v2.py` | FPNæ¶æ„å®šä¹‰ |

---

### é…ç½®æ–‡ä»¶ (configs/)

**model_registry.json**: æ¨¡å‹æ³¨å†Œè¡¨
- åŒ…å«æ‰€æœ‰æ¨¡å‹çš„å…ƒä¿¡æ¯
- è·¯å¾„ã€å‡†ç¡®ç‡ã€æ¶æ„ã€å‚æ•°ç­‰
- æµ‹è¯•è„šæœ¬ä¾èµ–æ­¤æ–‡ä»¶

---

### æµ‹è¯•è„šæœ¬ (scripts/)

| è„šæœ¬ | åŠŸèƒ½ | ç”¨æ³• |
|------|------|------|
| `test_single_model.py` | æµ‹è¯•å•ä¸ªæ¨¡å‹ | `python scripts/test_single_model.py --model resnet_optimized_1.12` |
| `test_all_models.py` | æµ‹è¯•æ‰€æœ‰æ¨¡å‹ | `python scripts/test_all_models.py` |

---

### å¿«é€Ÿæµ‹è¯• (quick_test.bat)

ä¸€é”®æµ‹è¯•è„šæœ¬ï¼Œä¾æ¬¡æ‰§è¡Œï¼š
1. æµ‹è¯•æœ€ä½³å•æ¨¡å‹
2. æµ‹è¯•ImprovedV2
3. æµ‹è¯•æ‰€æœ‰æ¨¡å‹å¹¶ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š

---

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ |
|------|---------|
| Python | 3.8+ |
| PyTorch | 2.0+ |
| NumPy | 1.21+ |
| scikit-learn | 1.0+ |
| LightGBM | 3.3+ |
| CUDA | 11.0+ (å¯é€‰) |

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| é˜¶æ®µ | æœ€ä½³æ¨¡å‹ | å‡†ç¡®ç‡ | æå‡ |
|------|---------|--------|------|
| Stage 0 | Baseline | 57.11% | - |
| Stage 1 | ImprovedV2 | 85.28% | +28.17% |
| Stage 2 | ResNet-Opt | 88.75% | +3.47% |
| Stage 3 | Multi-seed | 87.39% | æ¶æ„å¤šæ ·åŒ– |
| Stage 4 | Stacking | 93.09% | +4.34% |

**æµ‹è¯•é›†æ€§èƒ½**: 90.30%

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. å¿«é€Ÿæµ‹è¯•
```bash
# Windows
quick_test.bat

# æˆ–è€…æ‰‹åŠ¨æµ‹è¯•
python scripts/test_single_model.py --model resnet_optimized_1.12
```

### 3. æŸ¥çœ‹ç»“æœ
- ç»ˆç«¯è¾“å‡º: å‡†ç¡®ç‡ã€F1ç­‰æŒ‡æ ‡
- JSONæ–‡ä»¶: `outputs/predictions/*.json`
- å¯¹æ¯”æŠ¥å‘Š: `outputs/metrics/all_models_comparison.json`

---

## ğŸ“– æ–‡æ¡£ç´¢å¼•

1. **README.md**: é¡¹ç›®æ¦‚è§ˆã€å¿«é€Ÿå¼€å§‹ã€æ¨¡å‹åˆ—è¡¨
2. **PRESENTATION_GUIDE.md**: 10åˆ†é’Ÿæ±‡æŠ¥æ¼”è®²æŒ‡å—
3. **PROJECT_INFO.md**: æœ¬æ–‡æ¡£ï¼Œæ–‡ä»¶å¤¹è¯¦ç»†è¯´æ˜

---

## âš™ï¸ è‡ªå®šä¹‰ä¸æ‰©å±•

### æ·»åŠ æ–°æ¨¡å‹

1. å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥å¯¹åº”é˜¶æ®µç›®å½•
2. åœ¨ `configs/model_registry.json` æ³¨å†Œ
3. è¿è¡Œæµ‹è¯•éªŒè¯

### ä¿®æ”¹æµ‹è¯•å‚æ•°

ç¼–è¾‘è„šæœ¬ä¸­çš„å‚æ•°ï¼š
```python
# test_single_model.py
batch_size = 64  # è°ƒæ•´æ‰¹æ¬¡å¤§å°
device = 'cuda'  # å¼ºåˆ¶ä½¿ç”¨GPU/CPU
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### æ¨¡å‹åŠ è½½å¤±è´¥
- æ£€æŸ¥ `model_registry.json` ä¸­çš„è·¯å¾„æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ `.pt` æ–‡ä»¶å­˜åœ¨
- æŸ¥çœ‹ `metrics.json` é…ç½®æ˜¯å¦å®Œæ•´

### CUDAé”™è¯¯
- å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„PyTorch: `torch.cuda.is_available()`
- æˆ–è€…ä½¿ç”¨CPUæ¨¡å¼ï¼ˆè‡ªåŠ¨é™çº§ï¼‰

### å‡†ç¡®ç‡å¼‚å¸¸
- å°å¹…å·®å¼‚ï¼ˆ<1%ï¼‰æ­£å¸¸
- å¤§å¹…å·®å¼‚æ£€æŸ¥æ•°æ®é›†æ˜¯å¦æ­£ç¡®

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å•æ¨¡å‹ä½¿ç”¨
- æ¨è: `resnet_optimized_1.12` (88.75%, 4.75Må‚æ•°)
- å¹³è¡¡æ€§èƒ½å’Œé€Ÿåº¦

### è¿½æ±‚æè‡´
- ä½¿ç”¨Stacking (93.09%)
- éœ€è¦åŠ è½½10ä¸ªæ¨¡å‹ï¼Œæ¨ç†æ…¢10å€

### èµ„æºå—é™
- ä½¿ç”¨ `resnet_optimized` (87.80%, 3.2Må‚æ•°)
- æˆ– `seed_2023` (87.02%, 3.8Må‚æ•°)

---

## ğŸ“ å­¦ä¹ ä»·å€¼

æœ¬é¡¹ç›®å±•ç¤ºäº†ï¼š

1. **ç³»ç»Ÿä¼˜åŒ–æ–¹æ³•è®º**
   - é—®é¢˜é©±åŠ¨çš„è¿­ä»£
   - æ•°æ®æ”¯æ’‘çš„å†³ç­–
   - æ¸è¿›å¼æå‡ç­–ç•¥

2. **æ·±åº¦å­¦ä¹ æŠ€æœ¯æ ˆ**
   - ResNetæ®‹å·®ç½‘ç»œ
   - SEæ³¨æ„åŠ›æœºåˆ¶
   - Focal Loss
   - ç‰¹å¾èåˆæ–¹æ³•
   - é›†æˆå­¦ä¹  (Stacking)

3. **å·¥ç¨‹å®è·µç»éªŒ**
   - æ¨¡å‹ç®¡ç†ä¸ç‰ˆæœ¬æ§åˆ¶
   - å¯å¤ç°æ€§è®¾è®¡
   - æ€§èƒ½ç›‘æ§ä¸å¯¹æ¯”
   - æ–‡æ¡£åŒ–ä¸æ¼”ç¤º

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ README.md çš„"å¸¸è§é—®é¢˜"ç« èŠ‚
2. æ£€æŸ¥ç¯å¢ƒé…ç½®: `pip list | grep torch`
3. éªŒè¯æ•°æ®å®Œæ•´æ€§: `ls data/`
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—å®šä½é—®é¢˜

---

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆ  
**æœ€åæ›´æ–°**: 2024å¹´10æœˆ24æ—¥  
**ç»´æŠ¤è€…**: MNIST-Compare Team

